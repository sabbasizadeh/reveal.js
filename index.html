<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<meta http-equiv="Cache-Control" content="no-store, max-age=0">
		<title>DCN Talk</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/white.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<style>
					.container{
						margin-top: 100px;
						display: flex;
					}
					.col{
						flex: 1;
						align-items: right;
					}
					.text{
						width: 100%;
					}
				</style>

				<style>
					.logocontainer {
						display: grid;
						align-items: center; 
						grid-template-columns: 60px 250px;
						column-gap: 5px;
					}
					
					img {
						max-width: 100%;
						/* max-height:100%; */
					}
					
					.text {
						font-size: 21px;
					}
				</style>

				<style>
					.imgcolumn {
						display: grid;
						align-items: center; 
						grid-template-columns: 1fr 450px;
						column-gap: 5px;
					}
					
					.textcolumn {
						max-height:100%;
					}
					
					img {
						/* max-width: 100%; */
					}
				</style>

				<section>
					<!-- <div class="container">
						<div class="col">
						Column 1 Content
						</div>
						<div class="col">
						Column 2 Content
						</div>
					</div> -->
					<h1> Data Center Networks: Migration &amp; Transportation</h1>
					<div class="container">
						<div style="margin-top:75px;" class="col">
							Sepehr Abbasi Zadeh <br>
							Summer 2023 - EPFL
						</div>
						<div class="col">
							<div style="margin-left:100px;" class="logocontainer">
								<img data-src="images/uoft-cropped.png" width="60">
								<div class="text">University of Toronto</div>
							</div>
							<!-- </div>
								<div class="col"> -->
							<!-- <br> -->
							<!-- <div class="text"> test</div> -->
							<div style="margin-left:100px;" class="logocontainer">
								<img  data-src="images/huawei-cropped.png" width="60">
								<div class="text">Huawei Canada</div>
							</div>
						</div>
					</div>
				</section>

				<section>
					<h2>Data Center Networks</h2>
					<div class="imgcolumn">
						<div class="textcolumn">
							<ul>
								<li class="fragment" data-fragment-index="0"> Extreme increasing demand for computing</li>
							<ul>
								<li class="fragment" data-fragment-index="1"> Cloud computing </li>
								<li class="fragment" data-fragment-index="2"> AI/ML models</li>
								<li class="fragment" data-fragment-index="3"> LLM/Transformers [1]</li>
							</ul>
						</div>
						<img class="fragment" data-fragment-index="3" src="images/Transformers-Model-Sizes-Increasing-Exponentially-with-Many-Different-Use-Cases.jpg" width="800px">
					</div>
					
					<h4 class="fragment" data-fragment-index="4">Network Challenges</h4>
					<div class="imgcolumn">
						<div class="textcolumn">
							<ul>
								<li class="fragment" data-fragment-index="5"> Management at Scale </li>
								<ul class="fragment" data-fragment-index="6">
									<li> Migration </li>
									<li> Overlay Networks</li>
								</ul>
								<li class="fragment" data-fragment-index="7"> Congestion</li>
								<li class="fragment" data-fragment-index="8"> First-RTT Dilemma [2]</li>
							</ul>
						</div>
						<img class="fragment" data-fragment-index="8" src="images/first-rtt.png" width="800px">
					</div>
				</section>

				<section>
					<div class="container">
						<div class="col">
							<h3 data-id="dir1"> Migration </h3>
							<ol style="margin-left: 100px; margin-top: 60px;">
								<li>Protocol enhancement</li>
								<li>Batch scheduling</li>
								<li>Cut the tail latency</li>
								<li>Migrate a sub-network</li>
							</ol>
						</div>
					<!-- <hr><hr><hr><hr><hr>
					<hr style="margin-right: 50px;"> -->
						<div class="col">
							<h3 data-id="dir2"> Transport </h3>
							<ol class="fragment" style="margin-left: 100px; margin-top: 60px;">
								<li>Scout: A novel congestion signal</li>
								<li>A Scout-Based Congestion Control</li>
								<li>Augmenting TCP/IP Stack via eBPF</li>
							</ol>
						</div>
					</div>
				</section>

				<section data-transition="slide" data-background="#b5533c" data-background-transition="zoom">
					<p style="color: white; margin-top: 400px;" class="r-fit-text">MIGRATION</p>
				</section>

				<section data-auto-animate>
					<h2>Load Migration</h2>
					<h4 style="margin-top: 40px;"> Reasons</h4>
					<ul>
						<li class="fragment"> Change in the demand</li>
						<li class="fragment"> SW/HW maintenance</li>
						<li class="fragment"> Isolation and Monitoring</li>
						<li class="fragment"> Disaster prevention</li>
					</ul>
					<h4 class="fragment" style="margin-top: 40px;"> Granularities</h4>
					<ul>
						<li data-id="d1" class="fragment"> Control Path</li>
						<ul>
							<li class="fragment"> Controller load migration </li>
						</ul>
						
						<li class="fragment"> Data Path</li>
						<ul>
							<li class="fragment"> VM/Container</li>
							<li class="fragment"> Application</li>
							<li class="fragment"> Tenant</li>
							<li data-id="d2" class="fragment"> Any virtual sub-network</li>
						</ul>
					</ul>					
				</section>


				<section data-auto-animate>
					<h2>Migration</h2>
					<h4 style="margin-top: 40px;"> Reasons</h4>
					<ul>
						<li> Change in the demand</li>
						<li> SW/HW maintenance</li>
						<li> Isolation and Monitoring</li>
						<li> Disaster prevention</li>
					</ul>
					<h4 style="margin-top: 40px;"> Granularities</h4>
					<ul>
						<li> Control Path</li>
						<ul>
							<li data-id="d1" style="color: blue;"> Controller load migration </li>
						</ul>
						
						<li> Data Path</li>
						<ul>
							<li> VM/Container</li>
							<li> Application</li>
							<li> Tenant</li>
							<li data-id="d2" style="color: blue;"> Any virtual sub-network</li>
						</ul>
					</ul>					
				</section>


				<section>
					<h2>Load Migration</h2>
					<div class="container">
						<div class="col">
							<h4>From 4-Phase to 3-Phase protocols</h4>
						</div>
						<div class="col">	
							<div class="r-stack"> 
								<img class="fragment current-visible" data-fragment-index="0" src="images/4phase.png" height="360">
								<img class="fragment current-visible" data-fragment-index="1" src="images/3phase.png" height="360">
								<div class="fragment banner current-visible">
									23-50% migration speedup
								</div>
								<div class="r-stack fragment">
									<img src="images/poster-3phase.png" height="160">
									<img style="margin-top: 160px; margin-left: 20px;" src="images/paper-3phase.png" height="120">
								</div>
							</div>
						</div>
					</div>			
							
					<div class="container">
						<div class="col">
							<h4 class="fragment">Batch Scheduling</h4>
						</div>
						<div class="col">	
							<div class="r-stack"> 
								<img class="fragment current-visible" src="images/batch.png" height="360">
								<div class="fragment banner current-visible">
									<ul>
										<li>Outperforms ILP</li>
										<li>Theoretical guarantees</li>
									</ul>
								</div>
								<div class="fragment fade-down">
									<img src="images/poster-sched.png" height="160">
									<img src="images/paper-sched.png" height="160">
								</div>
							</div>
						</div>
					</div>	
				</section>

				
				<section>
					<h2>Load Migration</h2>
					<div class="container">
						<div class="col">
							<h4>Meta-Migration</h4>
						</div>
						<div class="col">	
							<div class="r-stack"> 
								<img class="fragment current-visible" src="images/mig-pool.png" height="200">
								<img class="fragment current-visible" src="images/single-meta.png" height="360">
								<img class="fragment current-visible" src="images/meta2.png" height="360">
								<div class="fragment banner current-visible">
									<ul>
										<li>Up to 53% migration speedup</li>
										<li>Results matching our theorems </li>
									</ul>
								</div>
								<div class="fragment fade-down">
									<img src="images/paper-meta.png" height="160">
								</div>
							</div>
						</div>
					</div>			
							
					<div class="container">
						<div class="col">
							<h4 class="fragment">Live Stateful Sub-Network Migration</h4>
						</div>
						<div class="col">	
							<div class="r-stack"> 
								<img class="fragment current-visible" src="images/subnet.png" height="260">
								<img class="fragment current-visible" src="images/qanat-background.png" height="300">
								<div class="fragment banner current-visible">
									<ul>
										<li>Per-connection consistency</li>
										<li>In-order packet delivery</li>
										<li>VNF policy enforcement</li>
										<li>Failure tolerance</li>
									</ul>
								</div>
								<img class="fragment" src="images/paper-qanat.png" height="120">
								<img class="fragment" src="images/patent.png" height="160">
							</div>
						</div>
					</div>	
				</section>

				<section data-transition="slide" data-background="#b5533c" data-background-transition="zoom">
					<p style="color: white; margin-top: 400px;" class="r-fit-text">TRANSPORTATION</p>
				</section>

				<section>
					<h2>Congestion Control (CC)</h2>
					<ul>
						<li class="fragment" data-fragment-index="0">Applications demand network bandwidth</li>
						<li class="fragment" data-fragment-index="1">Overshooting results in drop</li>
						<li class="fragment" data-fragment-index="2">Underutilization increases FCT</li>
						<li class="fragment" data-fragment-index="3">The sending rate should be adjusted</li>
						<li class="fragment" data-fragment-index="4">End hosts make these decisions based on signals</li>
					</ul>	
					<div style="margin-top: 100px;" class="container">
						<div class="col">
							<div class="fragment" data-fragment-index="5">
								<h3>Congestion signals</h3>
							</div>
							<!-- <ul class="fragment data-fragment-reset" data-fragment-index="7" style="margin-top: 40px;">
								<li>Packet Loss</li>
								<li>RTT Delay Measurement</li>
								<li>Explicit Congestion Notification (ECN)</li>
								<li>In-band Network Telemetry (INT)</li>
								<li style="color: blue;">Scout</li>
							</ul>	 -->
							<img style="margin-top: 100px; margin-left: 280px;" class="fragment" data-fragment-index="6" src="images/signal-timeliness.png" height="260">
						</div>
					</div>
				</section>

				<section>
					<h2>Scout</h2>
					<ul>
						<li class="fragment">We periodically send small probe packets</li>
						<li class="fragment">These packets are sent with lower priority than data</li>
					</ul>	
					<img class="fragment" style="margin-left: 270px;" src="images/scout-queues.png">
					<img class="fragment" style="margin-left: 240px;" src="images/scout-delay.png">
				</section>

				<section>
					<h2>DCN Scout-Based Congestion Control</h2>
					<img style="margin-left: 300px;" src="images/scout-arch.png" width="600">
					
					<div class="fragment">
						<h3>Implementation Challenges</h3>
					</div>
					<ul style="margin-top: 20px;">
						<li class="fragment">Following operations are complicated under Linux TCP stack
							<ul>
								<li>High frequency packet generation</li>
								<li>IP Priority marking per packet</li>
							</ul>
						</li>
						<li class="fragment"><b>Maintenance at scale</b>: Kernel code should not be touched!</li>
						<li class="fragment"><b>Transparency</b>: Application-layer sockets should remain intact</li>
						<li class="fragment"><b>Short-RTT DCN</b>: User-level applications have high context switching overhead</li>
						<!-- <li class="fragment">ECMP routing: Out-of-band probes should integrate with TCP socket</li> -->
					</ul>
					<!-- <div style="margin-top: 50px; border: 2px solid red; border-radius: 25px;" class="fragment">
						<span style="color: blue;">eBPF</span> is the solution.
					</div>	 -->
					<div class="banner fragment" style="margin-top: 50px;">
						eBPF is the solution!
					</div>
				</section>

				<section>
					<h2>eBPF for Scout</h2>
					<div class="container">
						<div class="col">
							<h4 style="margin-top: 20px;">Receiver-side:</h4>
							<ul>
								<li class="fragment">eBPF TC layer reflects the Scout (ACK)</li>
							</ul>
						</div>
						<div class="col">
							<img style="margin-left: 300px;" src="images/scout-arch.png" width="350">
						</div>
					</div>
					<h4 class="fragment" style="margin-top: 5px;">Sender-side:</h4>
					<ul>
						<li class="fragment">eBPF TC layer periodically clones packets from connections</li>
						<li class="fragment">Demotes the cloned packet's priority</li>
						<li class="fragment">Mark the packet as Scout* and send it over wire</li>
						<li class="fragment">On each Scout ACK, updates the RTT of Scouts in an <span style="color: blue;">eBPF maps</span></li>
						<li class="fragment">Finally, eBPF cong-ops layer reuses map states</li>
					</ul>
					<div class="banner fragment" style="margin-top: -100px; margin-left: 300px">
						<ul>
							<li>Packet generation</li>
							<li>Packet marking</li>
							<li>Transparent to the applications</li>
							<li>Avoids any user-level logic</li>
							<li>Not touching the kernel</li>
						</ul>
					</div>
						
					
				</section>

				<section>
					<h2>DCN Scout-Based Results</h2>
					<img style="margin-left: 200px;" src="images/scout-res.png" width="1000">
					<img style="margin-left: 400px;" src="images/scout-deviation.png" width="600">
				</section>

				<section>
					<h2>Augmenting TCP/IP Stack</h2>
					<h4 style="margin-top: 90px;" class="fragment">TCP/IP Stack Limitations</h4>
					<ul>
						<li class="fragment">Lack of complete network observability</li>
						<ul>
							<li class="fragment">Per flow CC</li>
						</ul>
						<li class="fragment">Not flexible enough</li>
						<ul>
							<li class="fragment">Per socket manipulation</li>
							<li class="fragment">Per path manipulation</li>
							<li class="fragment">Lack of per-packet manipulation interface</li>
						</ul>
						<li class="fragment">Less clarity regarding the rule enforcement delay</li>
					</ul>	
					
				</section>
				
				<section>
					<h2>Augmenter</h2>
					<h4 style="margin-top: 90px;" class="fragment" data-fragment-index="0">Key Idea</h4>
					<p style="margin-left: 90px;" class="fragment" data-fragment-index="0">unify the management and control of underlying flows</p>	
					<ul>
						<li class="fragment">Gather states</li>
						<li class="fragment">Aggregate those</li>
						<li class="fragment">Control existing and incoming flows</li>
					</ul>
					<br>
					<div class="banner fragment" style="margin-top: 50px; margin-left: 300px;">
						Towards a solution for first-RTT dilemma and incast
					</div>					
				</section>

				
				<section>
					<h2>Augmenter for setting IW</h2>
					<!-- <h4 style="margin-top: 90px;" class="fragment">User-Level</h4>
					<p style="margin-left: 90px;" class="fragment">unify the management and control of underlying flows</p> -->
					
					<ul>
						<li class="fragment">Initial Window (IW) defines the initial sending rate</li>
						<li class="fragment">Collect the congestion window (cwnd) values of the flows as they finish</li>
						<li class="fragment">Aggregate based on the path</li>
						<li class="fragment">Take a per path average and use that for IW of the path</li>
					</ul>
					<img class="fragment" style="margin-left: 400px;" src="images/iw.png" width="600">					
				</section>

				<section>
					<h2>Leveraging eBPF for Augmenter</h2>
					<h4 style="margin-top: 90px;" class="fragment" data-fragment-index="0">Kernel-Level State Binding</h4>
					<ul>
						<li class="fragment">Binding per path</li>
						<li class="fragment">Binding per layers</li>
					</ul>
					<div class="banner fragment fade-in-then-out" style="margin-top: 50px; margin-left: 300px;">
						eBPF Maps are the main enablers for state binding
					</div>			
					<h4 style="margin-top: 10px;" class="fragment">User-Level State Analyzer</h4>
					<ul>
						<li class="fragment">Floating point calculations</li>
						<li class="fragment">Longer control loops</li>
					</ul>
					<div class="banner fragment" style="margin-top: 50px; margin-left: 300px;">
						opportunity for ML-based control loops
					</div>
				</section>

				<section>
					<h2>Other uses and limitations</h2>
					<h4 style="margin-top: 90px;" class="fragment">Binding per path</h4>
					<ul>
						<li class="fragment">Aggregate congestion signals (e.g., ECN)</li>
					</ul>
					<h4 style="margin-top: 90px;" class="fragment">Binding per layers</h4>
					<ul>
						<li class="fragment">Per packet control level (e.g. TOS priority marking)</li>
						<li class="fragment">Merge some functionalities of Network and Transport layers (e.g. Scout)</li>
						<li class="fragment">Cooperation between the application and network layer (e.g. run consensus [3])</li>
					</ul>
					<h4 style="margin-top: 90px;" class="fragment">Limitations</h4>
					<ul>
						<li class="fragment">Memory access pattern</li>
						<li class="fragment">Packet steering between the CPUs and NIC's rxqs</li>
					</ul>
				</section>

				<section>
					<h2>References</h2>
					<ol>
						<li><a href="https://developer.nvidia.com/blog/nvidia-hopper-architecture-in-depth/">NVIDIA Hopper Architecture In-Depth</a></li>
						<li> Hu, Shuihai, et al. "Aeolus: A building block for proactive transport in datacenters." Proceedings of the Annual conference of the ACM Special Interest Group on Data Communication on the applications, technologies, architectures, and protocols for computer communication. 2020.</li>
						<li> Zhou, Yang, et al. "Electrode: Accelerating Distributed Protocols with {eBPF}." 20th USENIX Symposium on Networked Systems Design and Implementation (NSDI 23). 2023.</li>
					</ol>
				</section>

				
				<section data-transition="slide" data-background="#b5533c" data-background-transition="zoom">
					<p style="color: white;" class="r-fit-text">Q&amp;A</p>
				</section>
			</div>

			

		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/zoom/zoom.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/search/search.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>

			// Also available as an ES module, see:
			// https://revealjs.com/initialization/
			Reveal.initialize({
				controls: true,
				progress: true,
				center: false,
				hash: true,
				slideNumber: true,
				width: 1440,
  				height: 1080,
				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight ]
			});

		</script>

	</body>
</html>
